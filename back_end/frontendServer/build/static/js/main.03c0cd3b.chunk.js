(this.webpackJsonphomework_2_template=this.webpackJsonphomework_2_template||[]).push([[0],{27:function(e,t,a){},54:function(e,t,a){},61:function(e,t,a){e.exports=a(90)},66:function(e,t,a){},90:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(19),i=a.n(l),c=(a(66),a(22));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(11),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:null,isLoggedIn:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(o.a)(Object(o.a)({},e),{},{isLoggedIn:!0,user:t.user});case"LOGOUT":return Object(o.a)(Object(o.a)({},e),{},{isLoggedIn:!1,user:null});default:return e}},m=Object(c.c)({userReducer:s}),u=a(56),d=(a(27),a(26)),g=a(9),E=a(96),f=a(92),p=a(13),h=function(e){return r.a.createElement("div",null,r.a.createElement(E.a,{style:{marginLeft:"80px",marginRight:"80px"}},r.a.createElement(p.b,{to:"/Listing/"+e._id,params:e},r.a.createElement(E.a.Header,{as:"h5"},e.title)),r.a.createElement(E.a.Body,null,r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-start",flexWrap:"wrap",alignItems:"center"}},r.a.createElement("div",{style:{marginRight:"20px",height:"100px",width:"100px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderWidth:1,borderStyle:"solid"}},e.image100Url?r.a.createElement("img",{src:e.image100Url,alt:"listing_img",style:{height:"100px",width:"100px"}}):r.a.createElement(f.a,{animation:"border"})),r.a.createElement("div",null,r.a.createElement(E.a.Title,null,"$",e.price),r.a.createElement(E.a.Text,null,e.description))))),r.a.createElement("br",null))},b=a(94),v=a(95),y=a(25),O=a(6),j=function(e){return{type:"LOGIN",user:e}},w=a(8),x=a.n(w),I=function(){var e=Object(O.c)((function(e){return e.userReducer.isLoggedIn})),t=Object(O.b)();return r.a.createElement("div",null,r.a.createElement(b.a,{bg:"dark",variant:"dark",expand:"lg"},r.a.createElement(b.a.Brand,{href:"/"},"JS is the Best"),r.a.createElement(b.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(b.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(v.a,{className:"m-auto"},e?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.b,{to:"/postlisting",style:{marginRight:20}},"Post Listing"),r.a.createElement(p.b,{to:"/profile"},"Profile")):null),e?r.a.createElement(y.a,{variant:"secondary",style:{marginRight:5},onClick:function(){x.a.post("/auth/logout").then((function(e){e.data.success&&t({type:"LOGOUT"})}))}},"Log Out"):r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{variant:"secondary",style:{marginRight:5},href:"/login"},"Log In"),r.a.createElement(y.a,{variant:"outline-info",href:"/signup"},"Sign Up")))))},L=function(){return r.a.createElement("div",{style:{padding:20,backgroundColor:"#1d1d1d",color:"#ffffff",position:"fixed",bottom:0,width:"100%"}},r.a.createElement("div",{className:"container",style:{textAlign:"center"}},"\xa9 JS is the Best"))},C=function(){var e=Object(n.useState)([]),t=Object(g.a)(e,2),a=t[0],l=t[1],i=Object(n.useRef)(null);return Object(n.useEffect)((function(){x.a.get("/listing/getListings").then((function(e){e.data.success&&l(e.data.listings.reverse())})).catch((function(e){}))}),[]),Object(n.useEffect)((function(){return i.current=new WebSocket("ws://localhost:5004"),i.current.onmessage=function(e){var t=JSON.parse(e.data);switch(t.type){case"newListing":l((function(e){return[t.listing].concat(e)}));break;case"ImageProcessDone":l((function(e){return e.forEach((function(e){t.listing._id===e._id&&(e.image100Url=t.listing.image100Url,e.image500Url=t.listing.image500Url)})),Object(d.a)(e)}))}},function(){i.current.close()}}),[]),r.a.createElement("div",{className:"Home",style:{marginBottom:"15%"}},r.a.createElement(I,null),r.a.createElement("div",{style:{fontSize:"35px",textAlign:"center",marginTop:"3%",marginBottom:"3%"}},r.a.createElement("u",null,"Available Listings ")),a.map((function(e,t){return r.a.createElement(h,Object.assign({key:t},e))})),r.a.createElement(L,null))},k=a(23),S=a(5),_=(a(39),a(54),a(7)),B=function(){var e=Object(O.b)(),t=Object(O.c)((function(e){return e.userReducer.isLoggedIn})),a=r.a.useState({email:"",password:""}),n=Object(g.a)(a,2),l=n[0],i=n[1],c=function(e){i(Object(o.a)(Object(o.a)({},l),{},Object(k.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",null,r.a.createElement(I,null),t&&r.a.createElement(_.a,{to:"/"}),r.a.createElement("div",{className:"container-auth"},r.a.createElement("h1",{className:"heading-auth"},"Log In"),r.a.createElement("br",null),r.a.createElement(S.a,null,r.a.createElement(S.a.Group,{controlId:"formBasicEmail"},r.a.createElement(S.a.Label,null,"Email address"),r.a.createElement(S.a.Control,{type:"email",placeholder:"Enter email",name:"email",value:l.email,onChange:c,required:!0})),r.a.createElement(S.a.Group,{controlId:"formBasicPassword"},r.a.createElement(S.a.Label,null,"Password"),r.a.createElement(S.a.Control,{type:"password",placeholder:"Password",name:"password",value:l.password,onChange:c,required:!0})),r.a.createElement(y.a,{block:!0,size:"lg",variant:"primary",onClick:function(t){t.preventDefault(),x.a.post("/auth/login",l).then((function(t){t.data.success?e(j(t.data.user)):alert("Incorrect email or password")}))}}," Log In "))),r.a.createElement(L,null))},q=function(){var e=Object(O.c)((function(e){return e.userReducer.isLoggedIn})),t=Object(O.b)(),a=Object(n.useState)({username:"",email:"",password:"",confirmPassword:"",errors:[]}),l=Object(g.a)(a,2),i=l[0],c=l[1],s=function(e){c(Object(o.a)(Object(o.a)({},i),{},Object(k.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{style:{marginBottom:"10%"}},e&&r.a.createElement(_.a,{to:"/"}),r.a.createElement(I,null),r.a.createElement("div",{className:"container-auth"},r.a.createElement("h1",{className:"heading-auth"},"Sign Up"),r.a.createElement(S.a,null,r.a.createElement(S.a.Group,{controlId:"formBasicText"},r.a.createElement(S.a.Label,null,"Name"),r.a.createElement(S.a.Control,{type:"text",placeholder:"Enter Name",name:"name",value:i.name,onChange:s,required:!0})),r.a.createElement(S.a.Group,{controlId:"formBasicEmail"},r.a.createElement(S.a.Label,null,"Email address"),r.a.createElement(S.a.Control,{type:"email",placeholder:"name@example.com",name:"email",value:i.email,onChange:s,required:!0})),r.a.createElement(S.a.Group,{controlId:"formBasicPassword"},r.a.createElement(S.a.Label,null,"Password"),r.a.createElement(S.a.Control,{type:"password",placeholder:"Password",name:"password",value:i.password,onChange:s,required:!0})),r.a.createElement(S.a.Group,{controlId:"formBasicPassword"},r.a.createElement(S.a.Label,null,"Confirm Password"),r.a.createElement(S.a.Control,{type:"password",placeholder:"Re-enter Password",name:"confirmPassword",value:i.confirmPassword,onChange:s,required:!0})),r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Check,{id:"agree",type:"checkbox",style:{marginLeft:"45px"},label:"I agree to the Terms & Conditions"})),r.a.createElement(y.a,{block:!0,size:"lg",variant:"primary",onClick:function(e){e.preventDefault(),x.a.post("/auth/register",i).then((function(e){e.data.success?t(j(e.data.user)):alert("Incorrect credentials")})).catch((function(e){console.log(e)}))}}," Sign Up "),r.a.createElement("br",null),r.a.createElement("p",{style:{textAlign:"center"}}," Already have an account? ",r.a.createElement("a",{href:"/login"},r.a.createElement("u",null," Log In here! "))))),r.a.createElement(L,null))},P=a(93),R=a(59),N=function(){var e=Object(_.g)(),t=Object(O.c)((function(e){return e.userReducer.isLoggedIn})),a=Object(n.useState)(""),l=Object(g.a)(a,2),i=l[0],c=l[1],o=Object(n.useState)(""),s=Object(g.a)(o,2),m=s[0],u=s[1],d=Object(n.useState)(0),E=Object(g.a)(d,2),f=E[0],p=E[1];return r.a.createElement("div",{style:{marginBottom:"15%"}},!t&&r.a.createElement(_.a,{to:"/Login"}),r.a.createElement(_.a,{from:"/",to:"/PostListing"}),r.a.createElement(I,null),r.a.createElement("h1",{className:"heading-PostListing"},"Post Listing"),r.a.createElement("div",{className:"container-PostListing"},r.a.createElement("br",null),r.a.createElement(S.a.Group,{as:P.a,controlId:"formHorizontalText"},r.a.createElement(S.a.Label,{column:!0,sm:2},r.a.createElement("b",null,"Title")),r.a.createElement(R.a,{lg:10},r.a.createElement(S.a.Control,{type:"title",placeholder:"Enter title",name:"title",value:i,onChange:function(e){c(e.target.value)}}))),r.a.createElement(S.a.Group,{as:P.a,controlId:"formHorizontalText"},r.a.createElement(S.a.Label,{column:!0,sm:2},r.a.createElement("b",null,"Description")),r.a.createElement(R.a,{lg:10},r.a.createElement(S.a.Control,{type:"description",as:"textarea",rows:2,placeholder:"Enter description",name:"description",value:m,onChange:function(e){u(e.target.value)}}))),r.a.createElement(S.a.Group,{as:P.a,controlId:"formHorizontalText"},r.a.createElement(S.a.Label,{column:!0,sm:2},r.a.createElement("b",null,"Price")),r.a.createElement(R.a,{lg:10},r.a.createElement(S.a.Control,{type:"number",prefix:"$",placeholder:"Enter Price",name:"price",value:f,onChange:function(e){isNaN(e.target.value)?p(0):p(e.target.value)}}))),r.a.createElement(S.a.Group,{as:P.a,controlId:"formHorizontalText"},r.a.createElement(S.a.Label,{column:!0,sm:2},r.a.createElement("b",null,"Upload Image")),r.a.createElement(R.a,{lg:10},r.a.createElement(S.a.File,{id:"postListing_imageFile"}))),r.a.createElement("br",null),r.a.createElement(y.a,{className:"post-button",size:"lg",variant:"dark",onClick:function(t){t.preventDefault();var a=document.getElementById("postListing_imageFile").files;if(i&&m&&f&&f>0&&a.length>0){var n=new FormData;n.append("title",i),n.append("description",m),n.append("price",f),n.append("imageFile",a[0]),x.a.post("/listing/create",n,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){t.data.success?e.push("/"):alert("no no no")})).catch((function(e){}))}else alert("values missing")}},"Post")),r.a.createElement(L,null))},U=function(){var e=Object(O.c)((function(e){return e.userReducer.isLoggedIn})),t=Object(n.useState)([]),a=Object(g.a)(t,2),l=a[0],i=a[1],c=Object(n.useRef)(null),o=Object(O.c)((function(e){return e.userReducer.user}));return Object(n.useEffect)((function(){x.a.post("/listing/getUserListings").then((function(e){e.data.success&&i(e.data.listings.reverse())})).catch((function(e){}))}),[]),Object(n.useEffect)((function(){return c.current=new WebSocket("ws://localhost:5004"),c.current.onmessage=function(e){var t=JSON.parse(e.data);switch(t.type){case"newListing":i((function(e){return[t.listing].concat(e)}));break;case"ImageProcessDone":i((function(e){return e.forEach((function(e){t.listing._id===e._id&&(e.image100Url=t.listing.image100Url,e.image500Url=t.listing.image500Url)})),Object(d.a)(e)}))}},function(){c.current.close()}}),[]),r.a.createElement("div",{style:{marginBottom:"15%"}},!e&&r.a.createElement(_.a,{to:"/Login"}),e&&r.a.createElement("div",null,r.a.createElement(I,null),r.a.createElement("div",{className:"profile-margin"},r.a.createElement("div",{className:"profile-info"},r.a.createElement("label",null,"Name: ",o.name),r.a.createElement("br",null),r.a.createElement("label",null,"Email: ",o.email))),r.a.createElement("div",null,r.a.createElement("div",{style:{marginLeft:"auto",marginRight:"auto",marginTop:"3%",marginBottom:"3%",width:"60%"}},r.a.createElement("h3",{style:{marginTop:"25px",textAlign:"center"}},"My Listings"),l.map((function(e,t){return r.a.createElement(h,Object.assign({key:t},e))})))),r.a.createElement(L,null)))},T=a(60),D=function(e){var t=Object(O.c)((function(e){return e.userReducer.isLoggedIn})),a=Object(O.c)((function(e){return e.userReducer.user})),l=Object(_.g)(),i=Object(_.h)().id,c=Object(n.useState)(null),s=Object(g.a)(c,2),m=s[0],u=s[1],E=Object(n.useState)([]),h=Object(g.a)(E,2),b=h[0],v=h[1],j=Object(n.useState)(0),w=Object(g.a)(j,2),C=w[0],k=w[1],S=Object(n.useState)(null),B=Object(g.a)(S,2),q=B[0],P=B[1];Object(n.useEffect)((function(){i?x.a.post("/listing/getListing",{listingId:i}).then((function(e){e.data.success?u(e.data.listing):l.push("/")})).catch((function(e){})):l.push("/")}),[]),Object(n.useEffect)((function(){m&&a&&(a._id===m.posterId?x.a.post("/inquiry/getAdmInquiries",{listingId:i}).then((function(e){e.data.success&&v(e.data.inquiries)})).catch((function(e){})):x.a.post("/inquiry/getUserInquiry",{listingId:i}).then((function(e){e.data.success&&P(e.data.inquiry)})).catch((function(e){})))}),[a,m]);var R=Object(n.useRef)(null);return Object(n.useEffect)((function(){return R.current=new WebSocket("ws://localhost:5004"),function(){R.current.close()}}),[]),Object(n.useEffect)((function(){R.current.onmessage=function(e){var t=JSON.parse(e.data);switch(t.type){case"newInquiryMessage":m&&a&&t.inquiry&&(a._id===m.posterId?v((function(e){return e.forEach((function(e){e._id===t.inquiry._id&&(e.messages=t.inquiry.messages)})),Object(d.a)(e)})):q&&q._id===t.inquiry._id&&P(t.inquiry));break;case"ImageProcessDone":m&&m._id===t.listing._id&&u(Object(o.a)(Object(o.a)({},m),{},{image100Url:t.listing.image100Url,image500Url:t.listing.image500Url}))}}}),[a,m,q,b]),Object(n.useEffect)((function(){var e=document.getElementById("scrollerDiv2");e&&(e.scrollTop=e.scrollHeight)}),[q]),Object(n.useEffect)((function(){var e=document.getElementsByClassName("scrollerDiv1");e&&e.length>0&&console.log(e);var t,a=Object(T.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.scrollTop=n.scrollHeight}}catch(r){a.e(r)}finally{a.f()}}),[b]),r.a.createElement("div",{style:{marginBottom:"5%"}},r.a.createElement(I,null),r.a.createElement("br",null),r.a.createElement("a",{href:"/",style:{fontSize:"18px",marginLeft:"30px"}},r.a.createElement("u",null," ","<"," Back to Listings")),r.a.createElement("div",{style:{margin:"5%"}},m&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",marginBottom:20}},r.a.createElement("div",{style:{marginRight:"20px",height:"500px",width:"500px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderWidth:1,borderStyle:"solid"}},m.image500Url?r.a.createElement("img",{src:m.image500Url,alt:"listing_img",style:{height:"500px",width:"500px"}}):r.a.createElement(f.a,{animation:"border"})),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("b",null,"Title:")," ",m.title),r.a.createElement("p",null,r.a.createElement("b",null,"Price:")," $",m.price),r.a.createElement("p",null,r.a.createElement("b",null,"Description:")," ",m.description))),r.a.createElement("div",{style:{marginBottom:200}},t?a._id===m.posterId?r.a.createElement("div",null,r.a.createElement("h2",{style:{textAlign:"center"}},"Inquiries on your post:"),b&&b.map((function(e){return r.a.createElement("div",{style:{padding:20,alignContent:"center",marginLeft:"20%",marginRight:"20%"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(y.a,{onClick:function(){k(C===e._id?0:e._id)}},e.senderId)),C===e._id&&r.a.createElement("div",{style:{borderWidth:1,marginTop:20,borderStyle:"solid",textAlign:"center"}},r.a.createElement("div",{className:"scrollerDiv1",style:{height:350,padding:20,overflowY:"auto"}},e&&e.messages&&e.messages.map((function(e){return r.a.createElement("div",{style:{textAlign:e.senderId===a._id?"right":"left",color:e.senderId===a._id?"#1700ff":"#ff0000"}},r.a.createElement("div",{stle:{width:"100%",display:"flex"}},r.a.createElement("div",{style:{border:"0.5px solid black",borderRadius:"10px",margin:"5px",padding:"10px",display:"inline-block"}},e.body)))}))),r.a.createElement("div",{style:{height:50,display:"flex"}},r.a.createElement("input",{id:"inquiryMessage"+e._id,placeholder:"message",style:{width:"80%",marginBottom:10,marginLeft:"auto",marginRight:"auto"}}),r.a.createElement("div",null,r.a.createElement(y.a,{style:{marginRight:10},onClick:function(){var t=document.getElementById("inquiryMessage"+e._id);t.value&&t.value.length>0&&x.a.post("/inquiry/admSendMessage",{inquiryId:e._id,message:t.value}).then((function(e){e.data.success&&(t.value="")})).catch((function(e){}))}},"Send")))))}))):r.a.createElement("div",{style:{borderWidth:1,borderStyle:"solid",textAlign:"center",marginLeft:"20%",marginRight:"20%",marginTop:"5%"}},r.a.createElement("h2",null,"Inquiry:"),r.a.createElement("div",{id:"scrollerDiv2",style:{height:350,padding:20,overflowY:"auto"}},q&&q.messages&&q.messages.map((function(e){return r.a.createElement("div",{style:{textAlign:e.senderId===a._id?"right":"left",color:e.senderId===a._id?"#1700ff":"#ff0000"}},r.a.createElement("div",{stle:{width:"100%",display:"flex"}},r.a.createElement("div",{style:{border:"0.5px solid black",borderRadius:"10px",margin:"5px",padding:"10px",display:"inline-block"}},e.body)))}))),r.a.createElement("div",{style:{height:50,display:"flex"}},r.a.createElement("input",{id:"inquiryMessage0",placeholder:"message",style:{width:"80%",marginBottom:10,marginLeft:"auto",marginRight:"auto"}}),r.a.createElement("div",null,r.a.createElement(y.a,{style:{marginRight:15},onClick:function(){var e=document.getElementById("inquiryMessage0");e.value&&e.value.length>0&&x.a.post("/inquiry/sendMessage",{listingId:m._id,message:e.value}).then((function(t){t.data.success&&(e.value="")})).catch((function(e){}))}},"Send")))):r.a.createElement(p.b,{to:"/Login"},r.a.createElement(y.a,{variant:"primary",size:"lg",style:{display:"block",margin:"0 auto"}},"Please log in to view inquiries"))))),r.a.createElement(L,null))},G=a(8),A=Object(c.d)(m,Object(c.a)(u.a)),z=function(){var e=Object(O.b)();return Object(n.useEffect)((function(){G.post("/auth/user").then((function(t){t.data.success&&e(j(t.data.user))}))}),[]),r.a.createElement(p.a,null,r.a.createElement(_.d,null,r.a.createElement(_.b,{path:"/",exact:!0,component:C}),r.a.createElement(_.b,{path:"/Login",component:B}),r.a.createElement(_.b,{path:"/Signup",component:q}),r.a.createElement(_.b,{path:"/Profile",component:U}),r.a.createElement(_.b,{path:"/PostListing",component:N}),r.a.createElement(_.b,{path:"/Listing/:id",component:D}),r.a.createElement(_.b,{path:"/Listing",component:D})))};i.a.render(r.a.createElement(O.a,{store:A},r.a.createElement(r.a.StrictMode,null,r.a.createElement(z,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[61,1,2]]]);
//# sourceMappingURL=main.03c0cd3b.chunk.js.map