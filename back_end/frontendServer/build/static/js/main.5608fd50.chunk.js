(this.webpackJsonphomework_2_template=this.webpackJsonphomework_2_template||[]).push([[0],{137:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),r=a(16),i=a.n(r),c=(a(91),a(27));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(20),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:null,isLoggedIn:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(o.a)(Object(o.a)({},e),{},{isLoggedIn:!0,user:t.user});case"LOGOUT":return Object(o.a)(Object(o.a)({},e),{},{isLoggedIn:!1,user:null});default:return e}},m=Object(c.c)({userReducer:s}),u=a(73),d=(a(34),a(84)),g=a(15),E=a(146),p=a(142),h=a(12),f=function(e){return l.a.createElement("div",null,l.a.createElement(E.a,{style:{marginLeft:"80px",marginRight:"80px"}},l.a.createElement(h.b,{to:"/Listing/"+e._id,params:e},l.a.createElement(E.a.Header,{as:"h5"},e.title)),l.a.createElement(E.a.Body,null,l.a.createElement("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center"}},l.a.createElement("div",{style:{marginRight:"20px",height:"100px",width:"100px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderWidth:1,borderStyle:"solid"}},e.image100Url?l.a.createElement("img",{src:e.image100Url,alt:"listing_img",style:{height:"100px",width:"100px"}}):l.a.createElement(p.a,{animation:"border"})),l.a.createElement("div",null,l.a.createElement(E.a.Title,null,"$",e.price),l.a.createElement(E.a.Text,null,e.description))))),l.a.createElement("br",null))},b=a(144),v=a(145),y=a(25),O=a(10),j=function(e){return{type:"LOGIN",user:e}},L=a(13),x=a.n(L),w=function(){var e=Object(O.c)((function(e){return e.userReducer.isLoggedIn})),t=Object(O.b)();return l.a.createElement("div",null,l.a.createElement(b.a,{bg:"dark",variant:"dark",expand:"lg"},l.a.createElement(b.a.Brand,{href:"/"},"JS is the Best"),l.a.createElement(b.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(b.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(v.a,{className:"m-auto"},e?l.a.createElement(l.a.Fragment,null,l.a.createElement(h.b,{to:"/postlisting",style:{marginRight:20}},"Post Listing"),l.a.createElement(h.b,{to:"/profile"},"Profile")):null),e?l.a.createElement(y.a,{variant:"secondary",style:{marginRight:5},onClick:function(){x.a.post("/auth/logout").then((function(e){e.data.success&&t({type:"LOGOUT"})}))}},"Log Out"):l.a.createElement(l.a.Fragment,null,l.a.createElement(y.a,{variant:"secondary",style:{marginRight:5},href:"/login"},"Log In"),l.a.createElement(y.a,{variant:"outline-info",href:"/signup"},"Sign Up")))))},I=function(){return l.a.createElement("div",{style:{padding:20,backgroundColor:"#1d1d1d",color:"#ffffff",position:"fixed",bottom:0,width:"100%"}},l.a.createElement("div",{className:"container",style:{textAlign:"center"}},"\xa9 JS is the Best"))},C=function(){var e=Object(n.useState)([]),t=Object(g.a)(e,2),a=t[0],r=t[1],i=Object(n.useRef)(null);return Object(n.useEffect)((function(){x.a.get("/listing/getListings").then((function(e){e.data.success&&r(e.data.listings.reverse())})).catch((function(e){}))}),[]),Object(n.useEffect)((function(){return i.current=new WebSocket("ws://localhost:5004"),i.current.onmessage=function(e){var t=JSON.parse(e.data);switch(t.type){case"newListing":r((function(e){return[t.listing].concat(e)}));break;case"ImageProcessDone":r((function(e){return e.forEach((function(e){t.listing._id===e._id&&(e.image100Url=t.listing.image100Url,e.image500Url=t.listing.image500Url)})),Object(d.a)(e)}))}},function(){i.current.close()}}),[]),l.a.createElement("div",{class:"Home",style:{marginBottom:"10%"}},l.a.createElement(w,null),l.a.createElement("div",{style:{fontSize:"35px",textAlign:"center",marginTop:"3%",marginBottom:"3%"}},l.a.createElement("u",null,"Available Listings ")),a.map((function(e,t){return l.a.createElement(f,Object.assign({key:t},e))})),l.a.createElement(I,null))},S=a(31),N=a(6),k=(a(49),a(65),a(9)),P=function(){var e=Object(O.b)(),t=Object(O.c)((function(e){return e.userReducer.isLoggedIn})),a=l.a.useState({email:"",password:""}),n=Object(g.a)(a,2),r=n[0],i=n[1],c=function(e){i(Object(o.a)(Object(o.a)({},r),{},Object(S.a)({},e.target.name,e.target.value)))};return l.a.createElement("div",null,l.a.createElement(w,null),t&&l.a.createElement(k.a,{to:"/"}),l.a.createElement("div",{className:"container-auth"},l.a.createElement("h1",{className:"heading-auth"},"Log In"),l.a.createElement("br",null),l.a.createElement(N.a,null,l.a.createElement(N.a.Group,{controlId:"formBasicEmail"},l.a.createElement(N.a.Label,null,"Email address"),l.a.createElement(N.a.Control,{type:"email",placeholder:"Enter email",name:"email",value:r.email,onChange:c,required:!0})),l.a.createElement(N.a.Group,{controlId:"formBasicPassword"},l.a.createElement(N.a.Label,null,"Password"),l.a.createElement(N.a.Control,{type:"password",placeholder:"Password",name:"password",value:r.password,onChange:c,required:!0})),l.a.createElement(y.a,{block:!0,size:"lg",variant:"primary",onClick:function(t){t.preventDefault(),x.a.post("/auth/login",r).then((function(t){t.data.success?e(j(t.data.user)):alert("Incorrect email or password")}))}}," Log In "))),l.a.createElement(I,null))},q=function(){var e=Object(O.c)((function(e){return e.userReducer.isLoggedIn})),t=Object(O.b)(),a=Object(n.useState)({username:"",email:"",password:"",confirmPassword:"",errors:[]}),r=Object(g.a)(a,2),i=r[0],c=r[1],s=function(e){c(Object(o.a)(Object(o.a)({},i),{},Object(S.a)({},e.target.name,e.target.value)))};return l.a.createElement("div",{style:{marginBottom:"10%"}},e&&l.a.createElement(k.a,{to:"/"}),l.a.createElement(w,null),l.a.createElement("div",{className:"container-auth"},l.a.createElement("h1",{className:"heading-auth"},"Sign Up"),l.a.createElement(N.a,null,l.a.createElement(N.a.Group,{controlId:"formBasicText"},l.a.createElement(N.a.Label,null,"Name"),l.a.createElement(N.a.Control,{type:"text",placeholder:"Enter Name",name:"name",value:i.name,onChange:s,required:!0})),l.a.createElement(N.a.Group,{controlId:"formBasicEmail"},l.a.createElement(N.a.Label,null,"Email address"),l.a.createElement(N.a.Control,{type:"email",placeholder:"name@example.com",name:"email",value:i.email,onChange:s,required:!0})),l.a.createElement(N.a.Group,{controlId:"formBasicPassword"},l.a.createElement(N.a.Label,null,"Password"),l.a.createElement(N.a.Control,{type:"password",placeholder:"Password",name:"password",value:i.password,onChange:s,required:!0})),l.a.createElement(N.a.Group,{controlId:"formBasicPassword"},l.a.createElement(N.a.Label,null,"Confirm Password"),l.a.createElement(N.a.Control,{type:"password",placeholder:"Re-enter Password",name:"confirmPassword",value:i.confirmPassword,onChange:s,required:!0})),l.a.createElement(N.a.Group,null,l.a.createElement(N.a.Check,{id:"agree",type:"checkbox",style:{marginLeft:"45px"},label:"I agree to the Terms & Conditions"})),l.a.createElement(y.a,{block:!0,size:"lg",variant:"primary",onClick:function(e){e.preventDefault(),x.a.post("/auth/register",i).then((function(e){e.data.success?t(j(e.data.user)):alert("Incorrect credentials")})).catch((function(e){console.log(e)}))}}," Sign Up "),l.a.createElement("br",null),l.a.createElement("p",{style:{textAlign:"center"}}," Already have an account? ",l.a.createElement("a",{href:"/login"},l.a.createElement("u",null," Log In here! "))))),l.a.createElement(I,null))},B=a(143),_=a(76),R=function(){var e=Object(k.g)(),t=Object(O.c)((function(e){return e.userReducer.isLoggedIn})),a=Object(n.useState)(""),r=Object(g.a)(a,2),i=r[0],c=r[1],o=Object(n.useState)(""),s=Object(g.a)(o,2),m=s[0],u=s[1],d=Object(n.useState)(0),E=Object(g.a)(d,2),p=E[0],h=E[1];return l.a.createElement("div",null,!t&&l.a.createElement(k.a,{to:"/Login"}),l.a.createElement(w,null),l.a.createElement("h1",{className:"heading-PostListing"},"Post Listing"),l.a.createElement("div",{className:"container-PostListing"},l.a.createElement("br",null),l.a.createElement(N.a.Group,{as:B.a,controlId:"formHorizontalText"},l.a.createElement(N.a.Label,{column:!0,sm:2},l.a.createElement("b",null,"Title")),l.a.createElement(_.a,{lg:10},l.a.createElement(N.a.Control,{type:"title",placeholder:"Enter title",name:"title",value:i,onChange:function(e){c(e.target.value)}}))),l.a.createElement(N.a.Group,{as:B.a,controlId:"formHorizontalText"},l.a.createElement(N.a.Label,{column:!0,sm:2},l.a.createElement("b",null,"Description")),l.a.createElement(_.a,{lg:10},l.a.createElement(N.a.Control,{type:"description",as:"textarea",rows:2,placeholder:"Enter description",name:"description",value:m,onChange:function(e){u(e.target.value)}}))),l.a.createElement(N.a.Group,{as:B.a,controlId:"formHorizontalText"},l.a.createElement(N.a.Label,{column:!0,sm:2},l.a.createElement("b",null,"Price")),l.a.createElement(_.a,{lg:10},l.a.createElement(N.a.Control,{type:"number",prefix:"$",placeholder:"Enter Price",name:"price",value:p,onChange:function(e){isNaN(e.target.value)?h(0):h(e.target.value)}}))),l.a.createElement(N.a.Group,{as:B.a,controlId:"formHorizontalText"},l.a.createElement(N.a.Label,{column:!0,sm:2},l.a.createElement("b",null,"Upload Image")),l.a.createElement(_.a,{lg:10},l.a.createElement(N.a.File,{id:"postListing_imageFile"}))),l.a.createElement("br",null),l.a.createElement(y.a,{className:"post-button",size:"lg",variant:"dark",onClick:function(t){t.preventDefault();var a=document.getElementById("postListing_imageFile").files;if(i&&m&&p&&p>0&&a.length>0){var n=new FormData;n.append("title",i),n.append("description",m),n.append("price",p),n.append("imageFile",a[0]),x.a.post("/listing/create",n,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){t.data.success?e.push("/"):alert("no no no")})).catch((function(e){}))}else alert("values missing")}},"Post")),l.a.createElement(I,null))},T=a(23),A=a(28),G=function(){return l.a.createElement("div",null,l.a.createElement(w,null),l.a.createElement("div",{className:"profile-margin"},l.a.createElement("div",{className:"profile-info"},l.a.createElement("label",null,"Name "),l.a.createElement("br",null),l.a.createElement("label",null,"Email"))),l.a.createElement("div",{className:"profile-margin"},l.a.createElement("h3",{style:{marginTop:"25px"}},"My Listings"),l.a.createElement(B.a,{className:"profile-margin"},l.a.createElement(_.a,{lg:3},l.a.createElement(T.a,null,l.a.createElement(T.a.Image,{width:150,height:150,src:"./placeholder-image.jpg",thumbnail:!0}),l.a.createElement(A.a,{style:{textAlign:"center"}},"Title"))),l.a.createElement(_.a,{lg:3},l.a.createElement(T.a,null,l.a.createElement(T.a.Image,{width:150,height:150,src:"./placeholder-image.jpg",thumbnail:!0}),l.a.createElement(A.a,{style:{textAlign:"center"}},"Title"))),l.a.createElement(_.a,{lg:3},l.a.createElement(T.a,null,l.a.createElement(T.a.Image,{width:150,height:150,src:"./placeholder-image.jpg",thumbnail:!0}),l.a.createElement(A.a,{style:{textAlign:"center"}},"Title"))),l.a.createElement(_.a,{lg:3},l.a.createElement(T.a,null,l.a.createElement(T.a.Image,{width:150,height:150,src:"./placeholder-image.jpg",thumbnail:!0}),l.a.createElement(A.a,{style:{textAlign:"center"}},"Title"))))),l.a.createElement(I,null))},U=function(e){var t=Object(O.c)((function(e){return e.userReducer.isLoggedIn})),a=Object(O.c)((function(e){return e.userReducer.user})),r=Object(k.g)(),i=Object(k.h)().id,c=Object(n.useState)(null),o=Object(g.a)(c,2),s=o[0],m=o[1],u=Object(n.useState)([]),d=Object(g.a)(u,2),E=d[0],f=d[1],b=Object(n.useState)(0),v=Object(g.a)(b,2),j=v[0],L=v[1],I=Object(n.useState)(null),C=Object(g.a)(I,2),S=C[0],N=C[1];return Object(n.useEffect)((function(){i?x.a.post("/listing/getListing",{listingId:i}).then((function(e){e.data.success?m(e.data.listing):r.push("/")})).catch((function(e){})):r.push("/")}),[]),Object(n.useEffect)((function(){s&&a&&(a._id===s.posterId?x.a.post("/inquiry/getAdmInquiries",{listingId:i}).then((function(e){e.data.success&&f(e.data.inquiries)})).catch((function(e){})):x.a.post("/inquiry/getUserInquiry",{listingId:i}).then((function(e){e.data.success&&N(e.data.inquiry)})).catch((function(e){})))}),[a,s]),l.a.createElement("div",null,l.a.createElement(w,null),l.a.createElement("br",null),l.a.createElement("a",{href:"/",style:{fontSize:"18px",marginLeft:"30px"}},l.a.createElement("u",null," ","<"," Back to Listings")),l.a.createElement("div",{style:{margin:"5%"}},s&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{display:"flex",marginBottom:20}},l.a.createElement("div",{style:{marginRight:"20px",height:"500px",width:"500px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderWidth:1,borderStyle:"solid"}},e.image500Url?l.a.createElement("img",{src:e.img,alt:"listing_img",style:{height:"500px",width:"500px"}}):l.a.createElement(p.a,{animation:"border"})),l.a.createElement("div",null,l.a.createElement("p",null,"Title: ",s.title),l.a.createElement("p",null,"Price: ",s.price),l.a.createElement("p",null,"Description: ",s.description))),l.a.createElement("div",{style:{marginBottom:200}},t?a._id===s.posterId?l.a.createElement("div",null,l.a.createElement("h2",null,"Inquiries on your post:"),E&&E.map((function(e){return l.a.createElement("div",{style:{borderWidth:1,borderStyle:"solid",padding:20,marginBottom:10}},l.a.createElement(y.a,{onClick:function(){L(j===e._id?0:e._id)}},e.senderId),j===e._id&&l.a.createElement("div",{style:{borderWidth:1,marginTop:20,borderStyle:"solid",textAlign:"center"}},l.a.createElement("div",{style:{height:350,padding:20,overflowY:"auto"}},e&&e.messages&&e.messages.map((function(e){return l.a.createElement("div",{style:{textAlign:e.senderId===a._id?"right":"left",color:e.senderId===a._id?"#1700ff":"#ff0000"}},e.body)}))),l.a.createElement("div",{style:{height:50,display:"flex"}},l.a.createElement("input",{id:"inquiryMessage"+e._id,placeholder:"message",style:{width:"80%",margin:10}}),l.a.createElement("div",null,l.a.createElement(y.a,{onClick:function(){var t=document.getElementById("inquiryMessage"+e._id).value;t&&t.length>0&&x.a.post("/inquiry/admSendMessage",{inquiryId:e._id,message:t}).then((function(e){})).catch((function(e){}))}},"send")))))}))):l.a.createElement("div",{style:{borderWidth:1,borderStyle:"solid",textAlign:"center"}},l.a.createElement("h2",null,"Inquiry Chat:"),l.a.createElement("div",{style:{height:350,padding:20,overflowY:"auto"}},S&&S.messages&&S.messages.map((function(e){return l.a.createElement("div",{style:{textAlign:e.senderId===a._id?"right":"left",color:e.senderId===a._id?"#1700ff":"#ff0000"}},e.body)}))),l.a.createElement("div",{style:{height:50,display:"flex"}},l.a.createElement("input",{id:"inquiryMessage0",placeholder:"message",style:{width:"80%",margin:10}}),l.a.createElement("div",null,l.a.createElement(y.a,{onClick:function(){var e=document.getElementById("inquiryMessage0").value;e&&e.length>0&&x.a.post("/inquiry/sendMessage",{listingId:s._id,message:e}).then((function(e){})).catch((function(e){}))}},"send")))):l.a.createElement(h.b,{to:"/Login"},l.a.createElement(y.a,{variant:"primary",size:"lg",style:{display:"block",margin:"0 auto"}},"Please log in to view inquiries"))))))},z=a(77),D=a(78),M=a(85),F=a(83),W=a(21),H=function(e){Object(M.a)(a,e);var t=Object(F.a)(a);function a(){var e;return Object(z.a)(this,a),(e=t.call(this)).state={friends:[{name:"John Doe",message:"Hello, Are you there?",toRespond:1,seen:!1,active:!0},{name:"Danny Smith",message:"Lorem ipsum dolor sit",toRespond:0,seen:!1,active:!1},{name:"Alex Steward",message:"Lorem ipsum dolor sit",toRespond:0,seen:!1,active:!1},{name:"Ashley Olsen",message:"Lorem ipsum dolor sit",toRespond:0,seen:!1,active:!1},{name:"Kate Moss",message:"Lorem ipsum dolor sit",toRespond:0,seen:!1,active:!1},{name:"Lara Croft",message:"Lorem ipsum dolor sit",toRespond:0,seen:!1,active:!1},{name:"Brad Pitt",message:"Lorem ipsum dolor sit",toRespond:0,seen:!0,active:!1}],messages:[{author:"Brad Pitt",message:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et doloremagna aliqua."},{author:"Lara Croft",message:" Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium."},{author:"Brad Pitt",message:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et doloremagna aliqua."}]},e}return Object(D.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(w,null),l.a.createElement("br",null),l.a.createElement("a",{href:"/Listing",style:{fontSize:"18px",marginLeft:"30px"}},l.a.createElement("u",null,"<","  Back to Listing")),l.a.createElement(W.d,{className:"grey lighten-3 chat-room"},l.a.createElement(W.e,{style:{marginLeft:100,marginRight:100}},l.a.createElement(W.i,{className:"list-unstyled pl-3"},this.state.messages.map((function(e){return l.a.createElement(J,{key:e.author,message:e})})),l.a.createElement("li",null,l.a.createElement("div",{className:"form-group basic-textarea"},l.a.createElement("textarea",{className:"form-control pl-2 my-0",id:"exampleFormControlTextarea2",rows:"3",placeholder:"Type your inquiry here..."}),l.a.createElement(y.a,{color:"info",size:"lg",rounded:!0,className:"float-right mt-4"}," Send ")))))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(I,null))}}]),a}(n.Component),J=function(e){var t=e.message,a=t.author,n=t.message;return l.a.createElement("li",{className:"chat-message d-flex justify-content-between mb-4"},l.a.createElement(W.d,null,l.a.createElement(W.e,null,l.a.createElement("div",null,l.a.createElement("strong",{className:"primary-font"},a),l.a.createElement("small",{className:"pull-right text-muted"})),l.a.createElement("hr",null),l.a.createElement("p",{className:"mb-0"},n))))},$=H,Y=a(13),K=Object(c.d)(m,Object(c.a)(u.a)),Q=function(){var e=Object(O.b)();return Object(n.useEffect)((function(){Y.post("http://localhost:5000/auth/user").then((function(t){t.data.success&&e(j(t.data.user))}))}),[]),l.a.createElement(h.a,null,l.a.createElement(k.d,null,l.a.createElement(k.b,{path:"/",exact:!0,component:C}),l.a.createElement(k.b,{path:"/Login",component:P}),l.a.createElement(k.b,{path:"/Signup",component:q}),l.a.createElement(k.b,{path:"/Profile",component:G}),l.a.createElement(k.b,{path:"/PostListing",component:R}),l.a.createElement(k.b,{path:"/Messages",component:$}),l.a.createElement(k.b,{path:"/Listing/:id",component:U}),l.a.createElement(k.b,{path:"/Listing",component:U}),l.a.createElement(k.b,{path:"/Inquiry",component:$})))};i.a.render(l.a.createElement(O.a,{store:K},l.a.createElement(l.a.StrictMode,null,l.a.createElement(Q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},34:function(e,t,a){},65:function(e,t,a){},86:function(e,t,a){e.exports=a(137)},91:function(e,t,a){}},[[86,1,2]]]);
//# sourceMappingURL=main.5608fd50.chunk.js.map